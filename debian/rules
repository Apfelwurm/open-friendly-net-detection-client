#!/usr/bin/make -f

export DH_OPTIONS

%:
	dh $@ --with python3

override_dh_auto_build:
	python3 -m build --wheel --no-isolation || true

override_dh_installsystemd:
	dh_installsystemd --name=open-friendly-net-detection-client --no-enable --no-start

override_dh_builddeb:
	# Do the normal build (must leave artifacts in parent dir for dpkg tools)
	dh_builddeb
	# Afterwards copy (not move) artifacts into in-tree dist_debian for convenience.
	mkdir -p dist_debian
	for f in ../*.deb ../*.changes ../*.buildinfo ../*.dsc ../*.tar.* ../*.orig.tar.*; do \
		[ -e "$$f" ] || continue; \
		cp -n "$$f" dist_debian/; \
	done
