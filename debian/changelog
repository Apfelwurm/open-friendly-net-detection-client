open-friendly-net-detection-client (0.2.8) unstable; urgency=medium

  * Packaging: install NetworkManager dispatcher script under
    /usr/lib/NetworkManager/dispatcher.d/ so it is package-owned and updated
    on upgrades (instead of /etc which is a conffile).
  * Postinst: remove legacy conffile at /etc/NetworkManager/dispatcher.d/50-ofnd-nm
    using dpkg-maintscript-helper to avoid user prompts.
  * Prerm: trigger NetworkManager reload to pick up updated dispatcher scripts.

 -- Apfelwurm <Alexander@volzit.de>  Tue, 12 Aug 2025 10:20:00 +0000

open-friendly-net-detection-client (0.2.7) unstable; urgency=medium

  * Dispatcher: prefer direct NetworkManager D-Bus (busctl) for DHCP option
    extraction; avoids brittle nmcli/awk parsing.
  * Fallback to nmcli only if D-Bus has no value; preserve hex->IPv4 conversion.
  * Improve debug logging; fix install path comment.

 -- Apfelwurm <Alexander@volzit.de>  Tue, 12 Aug 2025 10:00:00 +0000

open-friendly-net-detection-client (0.2.6) unstable; urgency=medium

  * Update README to document NetworkManager dispatcher integration and deprecate
    dhclient hooks.
  * Packaging: add Recommends on network-manager to aid DHCP option capture via NM.
  * Remove legacy dhclient hook and option files from repository.

 -- Apfelwurm <Alexander@volzit.de>  Mon, 11 Aug 2025 15:20:00 +0000

open-friendly-net-detection-client (0.2.5) unstable; urgency=medium

  * Maintenance: bump version for postinst case/esac fix and service management stability.

 -- Apfelwurm <Alexander@volzit.de>  Mon, 11 Aug 2025 15:00:00 +0000

open-friendly-net-detection-client (0.2.4) unstable; urgency=medium

  * Ensure systemd service enabled + started on fresh install, restarted on upgrade.
  * Add prerm/postrm scripts to stop and disable service appropriately.
  * Extend legacy cleanup list for mis-installed hook/option paths.

 -- Apfelwurm <Alexander@volzit.de>  Mon, 11 Aug 2025 14:40:00 +0000

open-friendly-net-detection-client (0.2.3) unstable; urgency=medium

  * Add purge-time cleanup of legacy misplaced hook/script paths.
  * Introduce maintainer postinst cleanup for legacy dhclient hook locations.

 -- Apfelwurm <Alexander@volzit.de>  Mon, 11 Aug 2025 14:20:00 +0000

open-friendly-net-detection-client (0.2.1) unstable; urgency=medium

  * Add debugging to enumerate installed distributions when determining
    running version (use DEBUG log level or FND_DEBUG_LIST_PACKAGES=1).
  * Improves troubleshooting of version reporting showing 'unknown'.
  * Fix Changelog format

 -- Apfelwurm <Alexander@volzit.de>  Mon, 11 Aug 2025 13:30:00 +0000

open-friendly-net-detection-client (0.2.0) unstable; urgency=medium

  * BREAKING: Replace one-shot query UNIX socket with persistent streaming
    socket. Clients now receive initial network id plus subsequent updates
    (one line per change) without reconnecting.
  * Added subscriber broadcast mechanism and connection lifecycle handling.
  * Version bump to 0.2.0 to reflect protocol behavior change.
  * Fix dhclient exit hook install path (was placed in subdirectory and not executed).
    Now installed directly as /etc/dhcp/dhclient-exit-hooks.d/50-fnd-client.

 -- Apfelwurm <Alexander@volzit.de>  Mon, 11 Aug 2025 13:00:00 +0000

open-friendly-net-detection-client (0.1.2) unstable; urgency=medium

  * Added explicit version reporting on startup
  * Fixed potential state file deadlock in network ID publishing
  * Added detailed detection cycle start/end logging and cycle numbering
  * Added handshake duration timing metrics for performance insight
  * Improved periodic thread resilience and liveness monitoring
  * Clarified logging levels so periodic cycles visible at INFO
  * Enhanced error diagnostics for netlink and socket server threads
  * Misc minor refactors for reliability

 -- Apfelwurm <Alexander@volzit.de>  Mon, 11 Aug 2025 12:30:00 +0000

open-friendly-net-detection-client (0.1.1) unstable; urgency=medium

  * Fixed periodic detection cycle continuing after successful handshake
  * Improved netlink monitoring with better error handling and timeouts
  * Enhanced state file synchronization with fsync for reliability
  * Added robust socket server with proper timeout handling
  * Improved thread monitoring and error reporting
  * Added CAP_NET_RAW capability for better netlink support on Debian 12
  * Enhanced logging with more visible periodic cycle information
  * Fixed socket server cleanup on shutdown

 -- Apfelwurm <Alexander@volzit.de>  Sun, 11 Aug 2025 12:00:00 +0000

open-friendly-net-detection-client (0.1.0) unstable; urgency=medium

  * Initial release.

 -- Apfelwurm <Alexander@volzit.de>  Sun, 10 Aug 2025 12:00:00 +0000
